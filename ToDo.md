1. We got stuck in exactly the same part INFO: Brave web search completed {"status":200} and in screen showing searching with brave search .. we never reach the writer. review agian the flow and identify potential issues try to simplify the logic whenever you can revie any call to supabase I guess the supabase logic if any should be outside the search logic.
2.can we refactor writer agent to improve his output. 1. in the prompt avoid the temptaion to finish with a summay or a conclusion that will call all sources. just finish with concluding or sumarizing. 2. we use numbres for references. Replace the number for the name of the website. on hoover put the icon, show a modal litle window with : website name, title and a short sniped , copy as close as posible the style (with our  colors) of the first image provided. On click , follow the link provided to the website. In case you have more than one reference insted of writing the numbers one after the other in a row as is now, replace for the website name  and add a +2 for example representing we have 3 sources (the first one plus twomore). On hoover show a dialog with the number of sources ( in our example "souces . 3") and a list with web icon a snipped of title and wensite try match (with our colors) as close as posible the second image provided . also make each row of the list selectable with a link to the website.