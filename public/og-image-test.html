<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OG Image Test - CuriosAI</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 40px; background: #f5f5f5; }
        .container { background: white; padding: 30px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .test-case { margin: 20px 0; padding: 20px; border: 1px solid #ddd; border-radius: 5px; }
        .og-image { max-width: 100%; height: auto; border: 1px solid #ccc; }
        h1 { color: #333; }
        h2 { color: #0095FF; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üñºÔ∏è Dynamic OG Image Test</h1>
        <p>Testing dynamic Open Graph image generation with different queries.</p>
        
        <div class="test-case">
            <h2>Test 1: "Meta's Smart Wristband"</h2>
            <img class="og-image" id="test1" alt="OG Image Test 1">
            <p><strong>Expected:</strong> Image with query title and dynamic content</p>
        </div>
        
        <div class="test-case">
            <h2>Test 2: "Climate Change Solutions"</h2>
            <img class="og-image" id="test2" alt="OG Image Test 2">
            <p><strong>Expected:</strong> Image with environmental theme</p>
        </div>
        
        <div class="test-case">
            <h2>Test 3: "Artificial Intelligence"</h2>
            <img class="og-image" id="test3" alt="OG Image Test 3">
            <p><strong>Expected:</strong> Image with AI theme and snippet</p>
        </div>

        <h2>üìã Meta Tags Preview</h2>
        <div id="meta-preview" style="background: #f8f9fa; padding: 15px; border-radius: 5px; font-family: monospace;"></div>

        <h2>üîó Test LinkedIn URLs</h2>
        <div style="margin: 20px 0;">
            <button data-query="Meta's Smart Wristband" class="test-btn" style="margin: 5px; padding: 10px 15px; background: #0095FF; color: white; border: none; border-radius: 5px; cursor: pointer;">Test Meta Wristband</button>
            <button data-query="Climate Change Solutions" class="test-btn" style="margin: 5px; padding: 10px 15px; background: #28a745; color: white; border: none; border-radius: 5px; cursor: pointer;">Test Climate Solutions</button>
            <button data-query="Artificial Intelligence" class="test-btn" style="margin: 5px; padding: 10px 15px; background: #17a2b8; color: white; border: none; border-radius: 5px; cursor: pointer;">Test AI Query</button>
        </div>
    </div>

    <script>
        // Generate test OG images (simulating the Netlify function locally)
        function generateTestOGImage(query, snippet = '') {
            const canvas = document.createElement('canvas');
            canvas.width = 1200;
            canvas.height = 630;
            const ctx = canvas.getContext('2d');
            
            // Background
            ctx.fillStyle = '#ffffff';
            ctx.fillRect(0, 0, 1200, 630);
            
            // Gradient background
            const gradient = ctx.createLinearGradient(0, 0, 1200, 630);
            gradient.addColorStop(0, 'rgba(0, 149, 255, 0.1)');
            gradient.addColorStop(1, 'rgba(0, 149, 255, 0.05)');
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, 1200, 630);
            
            // Logo circle
            ctx.fillStyle = '#0095FF';
            ctx.beginPath();
            ctx.arc(120, 120, 40, 0, 2 * Math.PI);
            ctx.fill();
            
            // Query title
            ctx.fillStyle = '#1a1a1a';
            ctx.font = 'bold 42px Arial';
            ctx.fillText(query.slice(0, 50), 220, 140);
            
            // CuriosAI branding
            ctx.fillStyle = '#0095FF';
            ctx.font = '24px Arial';
            ctx.fillText('CuriosAI Web Search', 220, 190);
            
            // Snippet
            if (snippet) {
                ctx.fillStyle = '#666666';
                ctx.font = '18px Arial';
                ctx.fillText(snippet.slice(0, 85), 220, 250);
                if (snippet.length > 85) {
                    ctx.fillText(snippet.slice(85, 170) + '...', 220, 280);
                }
            } else {
                ctx.fillStyle = '#666666';
                ctx.font = '18px Arial';
                ctx.fillText('AI-powered search results with comprehensive', 220, 250);
                ctx.fillText('insights and analysis', 220, 280);
            }
            
            // Domain
            ctx.fillStyle = '#999999';
            ctx.font = '16px Arial';
            ctx.fillText('curiosai.com', 220, 350);
            
            return canvas.toDataURL();
        }
        
        // Load test images
        window.addEventListener('load', () => {
            document.getElementById('test1').src = generateTestOGImage(
                "Meta's Smart Wristband", 
                "Meta has developed a new smart wristband that can control devices using neural signals, similar to the interface seen in Minority Report"
            );
            
            document.getElementById('test2').src = generateTestOGImage(
                "Climate Change Solutions", 
                "Recent advances in renewable energy and carbon capture technologies are providing new pathways to address climate change"
            );
            
            document.getElementById('test3').src = generateTestOGImage(
                "Artificial Intelligence", 
                "AI systems are becoming increasingly sophisticated, with applications spanning from healthcare to autonomous vehicles"
            );
            
            // Add event listeners for test buttons
            document.querySelectorAll('.test-btn').forEach(button => {
                button.addEventListener('click', () => {
                    const query = button.getAttribute('data-query');
                    testUrl(query);
                });
            });
        });
        
        function testUrl(query) {
            const url = `${window.location.origin}/search?q=${encodeURIComponent(query)}`;
            const ogImage = `${window.location.origin}/.netlify/functions/og-image?query=${encodeURIComponent(query)}`;
            
            const metaPreview = `
<strong>LinkedIn Preview for: "${query}"</strong><br><br>
og:title = "${query}"<br>
og:description = "AI-powered search results for '${query}' - Comprehensive insights..."<br>
og:image = "${ogImage}"<br>
og:url = "${url}"<br>
og:site_name = "CuriosAI"<br><br>
<a href="${url}" target="_blank">üîó Open Search Page</a><br>
<a href="${ogImage}" target="_blank">üñºÔ∏è View OG Image</a>
            `;
            
            document.getElementById('meta-preview').innerHTML = metaPreview;
        }
    </script>
</body>
</html>
